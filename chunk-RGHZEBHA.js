import{Qc as v,Rc as A,S as d,X as k,_ as T,da as f,f as t,g as p,h,p as b,sa as l}from"./chunk-2XAWTCJG.js";var m="TW2Ko62QmALLSLSg5il6hBBCiYQgwag1sPwZcqFd";var L={env:"metar",apiTask:"https://api-redemet.decea.mil.br/mensagens/metar/",apiToken:"?api_key="+m},D={env:"status",apiTask:"https://api-redemet.decea.mil.br/aerodromos/status/localidades/",apiToken:"?api_key="+m},y={env:"statusBrasil",apiTask:"https://api-redemet.decea.mil.br/aerodromos/",apiToken:"?api_key="+m+"&pais="},x={env:"aerodromes",apiTask:"https://api-redemet.decea.mil.br/aerodromos/info?api_key="+m+"&"};var O=(()=>{var r,i,o,a,c,u;let n=class n{constructor(){p(this,r);p(this,i);p(this,o);p(this,a);p(this,c);p(this,u);this.arrayLoc=[],this.listLoc=l(""),this.countryLoc=l("Brasil"),this.requestedLoc=l(!1),h(this,r,new b(1)),h(this,i,new b(1)),h(this,o,new b(1)),h(this,a,f(A)),h(this,c,l(L.apiToken)),h(this,u,l(null)),this.getListTask=t(this,u).asReadonly(),this.headers=new v({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"})}setData(s){t(this,r).next(s),this.getData$().subscribe(e=>{this.listLoc.set(e)}),this.httpApiMetar$().subscribe(e=>{t(this,i).next(e)}),this.httpApiStatus$().subscribe(e=>{t(this,o).next(e)})}setDataCountry(s){this.requestedLoc()==!1&&(this.arrayLoc=[],t(this,r).next(s),console.log("data BR",s),this.getData$().subscribe(e=>{this.countryLoc.set(e)}),this.httpApiAerodromesBR$().subscribe(e=>{t(this,i).next(e),console.log("res.data Metar BR",e),Array.from(e.data).forEach($=>{this.arrayLoc.push($.cod)}),this.setData(this.arrayLoc.join(","))}))}getData$(){return t(this,r).asObservable()}getDataMetar$(){return t(this,i).asObservable()}getDataStatus$(){return t(this,o).asObservable()}httpApiMetar$(){return t(this,a).get(L.apiTask+this.listLoc()+t(this,c).call(this)).pipe(d(),k(s=>{t(this,u).set(s)}))}httpApiStatus$(){return t(this,a).get(D.apiTask+this.listLoc()+t(this,c).call(this)).pipe(d(),k(s=>{t(this,o).next(s)}))}httpApiAerodromes$(s){return t(this,a).get(x.apiTask+"localidade="+s).pipe(d())}httpApiAerodromesBR$(){return t(this,a).get(y.apiTask+y.apiToken+this.countryLoc()).pipe(d())}};r=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"});let g=n;return g})();export{O as a};
